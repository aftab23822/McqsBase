"use strict";(()=>{var e={};e.id=4558,e.ids=[4558],e.modules={11185:e=>{e.exports=require("mongoose")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},16954:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>h,patchFetch:()=>f,requestAsyncStorage:()=>m,routeModule:()=>d,serverHooks:()=>y,staticGenerationAsyncStorage:()=>g});var a={};r.r(a),r.d(a,{GET:()=>c,POST:()=>l});var s=r(49303),n=r(88716),o=r(60670),p=r(87070),i=r(25163),u=r(12757);async function c(e){try{await (0,i.Z)();let{searchParams:t}=new URL(e.url),r=parseInt(t.get("page"))||1,a=parseInt(t.get("limit"))||10,s=(r-1)*a,n=await u.Z.countDocuments(),o=await u.Z.find().sort({createdAt:-1,_id:-1}).skip(s).limit(a);return p.NextResponse.json({results:o,total:n,page:r,totalPages:Math.ceil(n/a)})}catch(e){return console.error("Past Papers API error:",e),p.NextResponse.json({error:"Failed to fetch past papers"},{status:500})}}async function l(e){try{await (0,i.Z)();let t=await e.json(),r=new u.Z(t);return await r.save(),p.NextResponse.json(r,{status:201})}catch(e){return console.error("Error adding past paper:",e),p.NextResponse.json({message:"Error adding past paper",error:e.message},{status:500})}}let d=new s.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/pastpapers/route",pathname:"/api/pastpapers",filename:"route",bundlePath:"app/api/pastpapers/route"},resolvedPagePath:"E:\\2.Freelance\\mcqs\\next-js\\app\\api\\pastpapers\\route.js",nextConfigOutput:"",userland:a}),{requestAsyncStorage:m,staticGenerationAsyncStorage:g,serverHooks:y}=d,h="/api/pastpapers/route";function f(){return(0,o.patchFetch)({serverHooks:y,staticGenerationAsyncStorage:g})}},12757:(e,t,r)=>{r.d(t,{Z:()=>n});var a=r(11185);let s=new a.Schema({title:{type:String,required:!0},year:{type:Number},department:{type:String},pdfUrl:{type:String},categoryId:{type:a.Schema.Types.ObjectId,ref:"Category"},subcategoryId:{type:a.Schema.Types.ObjectId,ref:"Subcategory"}},{timestamps:!0}),n=a.models.PastPaper||a.model("PastPaper",s)},25163:(e,t,r)=>{r.d(t,{Z:()=>o});var a=r(11185);if(!process.env.MONGO_URI)throw Error("Please define the MONGO_URI environment variable inside .env.local");let s=process.env.MONGO_URI,n=global.mongoose;n||(n=global.mongoose={conn:null,promise:null});let o=async function(){if(n.conn)return n.conn;n.promise||(n.promise=a.connect(s,{bufferCommands:!1}).then(e=>e));try{n.conn=await n.promise}catch(e){throw n.promise=null,e}return n.conn}}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[9276,5972],()=>r(16954));module.exports=a})();