"use strict";(()=>{var e={};e.id=9604,e.ids=[9604],e.modules={11185:e=>{e.exports=require("mongoose")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},7446:(e,a,i)=>{i.r(a),i.d(a,{originalPathname:()=>b,patchFetch:()=>f,requestAsyncStorage:()=>p,routeModule:()=>d,serverHooks:()=>v,staticGenerationAsyncStorage:()=>h});var l={};i.r(l),i.d(l,{GET:()=>y,POST:()=>m});var n=i(49303),t=i(88716),r=i(60670),o=i(87070),s=i(25163),c=i(6308),u=i(77742),g=i(34988);async function y(e){try{await (0,s.Z)();let{searchParams:a}=new URL(e.url),i=parseInt(a.get("page"))||1,l=parseInt(a.get("limit"))||10,n=(i-1)*l,t=await c.Z.countDocuments(),r=await c.Z.find().sort({createdAt:-1,_id:-1}).skip(n).limit(l);return o.NextResponse.json({results:r,total:t,page:i,totalPages:Math.ceil(t/l)})}catch(e){return console.error("MCQs API error:",e),o.NextResponse.json({error:"Failed to fetch MCQs"},{status:500})}}async function m(e){try{await (0,s.Z)();let{question:a,options:i,correct_option:l,detail_link:n,submitter:t,explanation:r,categoryId:y,subcategoryId:m,category:d}=await e.json(),p=y;if(d&&!y){let e=(0,g.S)(d),a=await u.Z.findOne({name:e});a||(a=new u.Z({name:e,type:"MCQ"}),await a.save()),p=a._id}let h=await c.Z.findOne({question:a,categoryId:p});if(h)return o.NextResponse.json({message:"Question already exists in this category",existingMcq:h},{status:409});let v=new c.Z({question:a,options:i,answer:l,explanation:r,categoryId:p,subcategoryId:m,link:n,submittedBy:t});return await v.save(),o.NextResponse.json(v,{status:201})}catch(e){return console.error("Error adding MCQ:",e),o.NextResponse.json({message:"Error adding MCQ",error:e.message},{status:500})}}let d=new n.AppRouteRouteModule({definition:{kind:t.x.APP_ROUTE,page:"/api/mcqs/route",pathname:"/api/mcqs",filename:"route",bundlePath:"app/api/mcqs/route"},resolvedPagePath:"E:\\2.Freelance\\mcqs\\next-js\\app\\api\\mcqs\\route.js",nextConfigOutput:"",userland:l}),{requestAsyncStorage:p,staticGenerationAsyncStorage:h,serverHooks:v}=d,b="/api/mcqs/route";function f(){return(0,r.patchFetch)({serverHooks:v,staticGenerationAsyncStorage:h})}},77742:(e,a,i)=>{i.d(a,{Z:()=>t});var l=i(11185);let n=new l.Schema({name:{type:String,required:!0},type:{type:String,enum:["MCQ","Quiz","PastPaper","Interview"],required:!0}},{timestamps:!0}),t=l.models.Category||l.model("Category",n)},6308:(e,a,i)=>{i.d(a,{Z:()=>t});var l=i(11185);i(25163);let n=new l.Schema({question:{type:String,required:!0},options:[{type:String,required:!0}],answer:{type:String,required:!0},explanation:{type:String},categoryId:{type:l.Schema.Types.ObjectId,ref:"Category"},subcategoryId:{type:l.Schema.Types.ObjectId,ref:"Subcategory"},link:{type:String},submittedBy:{type:String},pageOrder:{type:Number,default:0}},{timestamps:!0}),t=l.models.MCQ||l.model("MCQ",n)},25163:(e,a,i)=>{i.d(a,{Z:()=>r});var l=i(11185);if(!process.env.MONGO_URI)throw Error("Please define the MONGO_URI environment variable inside .env.local");let n=process.env.MONGO_URI,t=global.mongoose;t||(t=global.mongoose={conn:null,promise:null});let r=async function(){if(t.conn)return t.conn;t.promise||(t.promise=l.connect(n,{bufferCommands:!1}).then(e=>e));try{t.conn=await t.promise}catch(e){throw t.promise=null,e}return t.conn}},34988:(e,a,i)=>{i.d(a,{S:()=>t});let l=JSON.parse('{"F":{"english":"english","general-knowledge":"general-knowledge","pak-study":"pak-study","world-current-affairs":"world-current-affairs","pakistan-current-affairs":"pakistan-current-affairs","islamic-studies":"islamic-studies","everyday-science":"everyday-science","mathematics":"maths","maths":"maths","computer":"computer","pedagogy":"pedagogy","physics":"physics","chemistry":"chemistry","biology":"biology","urdu":"urdu","urdu-general-knowledge":"urdu","psychology":"psychology","agriculture":"agriculture","forestry":"forestry","economics":"economics","sociology":"sociology","political-science":"political-science","statistics":"statistics","english-literature":"english-literature","judiciary-and-law":"judiciary-law","judiciary-law":"judiciary-law","international-relations":"international-relations","physical-education":"physical-education","finance":"finance","hrm":"hrm","marketing":"marketing","accounting":"accounting","auditing":"auditing","electrical-engineering":"electrical-engineering","civil-engineering":"civil-engineering","mechanical-engineering":"mechanical-engineering","chemical-engineering":"chemical-engineering","software-engineering":"software-engineering","medical":"medical","biochemistry":"biochemistry","dental-materials":"dental-materials","general-anatomy":"general-anatomy","microbiology":"microbiology","oral-anatomy":"oral-anatomy","oral-histology":"oral-histology","oral-pathology-and-medicine":"oral-pathology-medicine","oral-pathology-medicine":"oral-pathology-medicine","physiology":"physiology","pathology":"pathology","pharmacology":"pharmacology","engineering":"engineering","election-officer":"election-officer","management-sciences":"management-sciences"},"b":[{"value":"english","label":"English"},{"value":"general-knowledge","label":"General Knowledge"},{"value":"pak-study","label":"Pakistan Studies"},{"value":"world-current-affairs","label":"World Current Affairs"},{"value":"pakistan-current-affairs","label":"Pakistan Current Affairs"},{"value":"islamic-studies","label":"Islamic Studies"},{"value":"everyday-science","label":"Everyday Science"},{"value":"maths","label":"Mathematics"},{"value":"computer","label":"Computer"},{"value":"pedagogy","label":"Pedagogy"},{"value":"physics","label":"Physics"},{"value":"chemistry","label":"Chemistry"},{"value":"biology","label":"Biology"},{"value":"urdu","label":"Urdu"},{"value":"psychology","label":"Psychology"},{"value":"agriculture","label":"Agriculture"},{"value":"forestry","label":"Forestry"},{"value":"economics","label":"Economics"},{"value":"sociology","label":"Sociology"},{"value":"political-science","label":"Political Science"},{"value":"statistics","label":"Statistics"},{"value":"english-literature","label":"English Literature"},{"value":"judiciary-and-law","label":"Judiciary and Law"},{"value":"international-relations","label":"International Relations"},{"value":"physical-education","label":"Physical Education"},{"value":"finance","label":"Finance"},{"value":"hrm","label":"HRM"},{"value":"marketing","label":"Marketing"},{"value":"accounting","label":"Accounting"},{"value":"auditing","label":"Auditing"},{"value":"electrical-engineering","label":"Electrical Engineering"},{"value":"civil-engineering","label":"Civil Engineering"},{"value":"mechanical-engineering","label":"Mechanical Engineering"},{"value":"chemical-engineering","label":"Chemical Engineering"},{"value":"software-engineering","label":"Software Engineering"},{"value":"medical","label":"Medical"},{"value":"biochemistry","label":"Biochemistry"},{"value":"dental-materials","label":"Dental Materials"},{"value":"general-anatomy","label":"General Anatomy"},{"value":"microbiology","label":"Microbiology"},{"value":"oral-anatomy","label":"Oral Anatomy"},{"value":"oral-histology","label":"Oral Histology"},{"value":"oral-pathology-medicine","label":"Oral Pathology Medicine"},{"value":"physiology","label":"Physiology"},{"value":"pathology","label":"Pathology"},{"value":"pharmacology","label":"Pharmacology"},{"value":"engineering","label":"Engineering"},{"value":"election-officer","label":"Election Officer"},{"value":"management-sciences","label":"Management Sciences"}]}'),n=l.F;function t(e){let a=e.toLowerCase().replace(/_/g,"-");if(a.endsWith("-mcqs")&&(a=a.slice(0,-5)),a.endsWith("-mcq")&&(a=a.slice(0,-4)),n[a])return n[a];for(let e of Object.keys(n).sort((e,a)=>a.length-e.length))if(a.startsWith(e))return n[e];return a}l.b}};var a=require("../../../webpack-runtime.js");a.C(e);var i=e=>a(a.s=e),l=a.X(0,[9276,5972],()=>i(7446));module.exports=l})();